<html>
  <head>
    <title>HAL my time, the friendly bot that track your time</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="/inspiritas-bootstrap/bootstrap/js/bootstrap.min.js"></script>

    <link href="/inspiritas-bootstrap/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/inspiritas-bootstrap/inspiritas.css" rel="stylesheet" type="text/css" />
<script>
var user= null;
//var user="xavier";

// for knockout, everyone can authenticate. If the user doesn't exist, it creates one. Security first.
var authenticate = function (name) {
  user = name;
  $('.name').html(user);
  $('.auth').fadeIn("slow");
  $("#login").slideUp("slow");
  $(".authenticated").css("opacity","1");
  $('#cmd').focus();
  
};

jQuery(function($){
  if (user == null) {
    $('.auth').hide();
    $(".authenticated").css("opacity","0.2");
    $('#signin-name').focus();
  } else {
    authenticate(user);    
  }

  $("#signin").submit(function(){
    var user=$("#signin-name").val();
    if (user == "")
      return false;
    $.ajax({
      url: "/user/connect",
      data:{user:user,bot:"web"},
      type: "post",
      success: function(data) {
        authenticate(user);   
        $('#result').append("<div class='alert alert-success'>"+data+"</div>");
      },
    });
    return false; 
  });



  $("#bot").submit(function(){
    $('#result').append("<div class='alert alert-info'>"+$("#cmd").val()+"</div>");
    $.ajax({
      url: "/user/do",
      data:{user:user,cmd:$("#cmd").val()},
      type: "post",
      success: function(data) {
        $('#result').append("<div class='alert alert-success'>"+data+"</div>");
      },
    });
    return false;
  });
});
</script>
  </head>
  <body>
<div class="navbar navbar-static-top navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="#">HAL my time</a>
      <span class="tagline">the friendly bot that tracks your time</span>

      <div class="nav-collapse collapse" id="main-menu">
        <div class="auth pull-right">
            <!--img class="avatar" src="images/littke.png"-->
            <span class="name">Tech To The People</span><br/>
            <span class="links">
                <a href="#">Settings</a>
                <a href="#">Logout</a>
            </span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
    <div class="row-fluid">
        <div class="span3">
            <aside>
            </aside>
        </div>
        <div class="span9" id="content-wrapper">
            <div id="content">
<section id="login">

                  <div class="row-fluid">
                    <div class="span6 well">
      <form class="form-signin" id="signin">
        <h2 class="form-signin-heading">Please sign in</h2>
        <input type="text" id="signin-name" class="input-block-level" title="for the nerds:that's your xmpp account" placeholder="chat address (email address on gmail)">
        <label class="checkbox">
          <input type="checkbox" value="remember-me"> Remember me
        </label>
        <button class="btn btn-large btn-primary" type="submit">Sign in</button>
      </form>
</div>
<div class="span6 alert alert-info">
<a class="close">x</a>
<p>You can give any address (even fake), but if you want the full experience of chating with the bot, you need to provide one that offers chat, like gmail.
</p>
<p>
We will not resell your contact details nor spam you in any way, shape or form.
</p>
<p>
<b>You can stop the test at any time by blocking the bot from your chat client</b>
</p>
</div>
</div>
</section>

               <section id="bot" class="authenticated">
                  <div class="sub-header">
                    <h1>Bot</h1>
                  </div>

    <form id="bot" class="form-horizontal">
                  <div class="row-fluid well">
                    <div class="span10">


                          <div class="control-group">
      <label class="control-label" for="cmd">Command</label>
       <div class="controls">
        <input name="cmd" id="cmd" class="input-block-level span12"  placeholder="Type your command (or 'help')" />
       </div>
                          </div>
</div>
                    <div class="span2">
                        <button type="submit" class="btn btn-primary">Send</button>
                      </div>

</div>
    </form>
</section>

              <section id="answers" class="authenticated">
                <div class="sub-header">
                  <h2>Result</h2>
                </div>

                <div class="row-fluid">
                    <div class="span12" id="result">
                    </div>
                </div>
              </section>
  

              <section id="miscellaneous" style="display:none;">
                <div class="sub-header">
                  <h2>Alerts</h2>
                </div>

                <div class="row-fluid">
                    <div class="span12">
                        <div class="alert alert-block">
                          <a class="close">&times;</a>
                          <h4 class="alert-heading">Alert block</h4>
                          <p>Best check yo self, you're not looking too good. Nulla vitae elit libero, a pharetra augue. Praesent commodo cursus magna, vel scelerisque nisl consectetur et.</p>
                        </div>
                    </div>
                </div>
                <div class="row-fluid">
                  <div class="span4">
                    <div class="alert alert-error">
                      <a class="close">&times;</a>
                      <strong>Error</strong> Change a few things up and try submitting again.
                    </div>
                  </div>
                  <div class="span4">
                    <div class="alert alert-success">
                      <a class="close">&times;</a>
                      <strong>Success</strong> You successfully read this important alert message.
                    </div>
                  </div>
                  <div class="span4">
                    <div class="alert alert-info">
                      <a class="close">&times;</a>
                      <strong>Information</strong> This alert needs your attention, but it's not super important.
                    </div>
                  </div>
                </div>
            </section>

<!--iframe src="http://nodeknockout.com/iframe/tech-to-the-people" frameborder=0 scrolling=no allowtransparency=true width=115 height=25>
</iframe-->

            </div>
        </div>
    </div>

</div><!-- /container -->

  </body>
</html>
